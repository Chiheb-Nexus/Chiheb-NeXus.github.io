<!DOCTYPE html>
<html lang="fr-fr">
    <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-119333037-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-119333037-1');
</script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Ethereum POA en utilisant Geth</title>

    <meta name="description" content="Comment monter une blockchain d'Ethereum avec le consensus Proof Of Authority (POA) en utilisant Geth">

    <!-- Google Authorship Markup -->
    <link rel="author" href="https://plus.google.com/ChihebNeXuss?rel=author">

    <!-- Social Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@Chiheb_NeXus">
    <meta name="twitter:title" content="Ethereum POA en utilisant Geth">
    <meta name="twitter:description" content="Comment monter une blockchain d'Ethereum avec le consensus Proof Of Authority (POA) en utilisant Geth">

    
    <meta property="twitter:image:src" content="https://chiheb-nexus.github.iohttp://www.newsonjapan.com/images/article/oracles6.png">
    

    <!-- Social Facebook/Open Graph -->
    <meta property="og:url" content="https://chiheb-nexus.github.io/ethereumpoa/">
    <meta property="og:title" content="Ethereum POA en utilisant Geth">
    
    <meta property="og:image" content="https://chiheb-nexus.github.iohttp://www.newsonjapan.com/images/article/oracles6.png">
    
    <meta property="og:description" content="Comment monter une blockchain d'Ethereum avec le consensus Proof Of Authority (POA) en utilisant Geth">
    <meta property="og:site_name" content="Nexus Coding | Pour un monde meilleur !">

    <!-- Social Google+/Schema.org  -->
    <meta itemprop="name" content="Ethereum POA en utilisant Geth"/>
    <meta itemprop="description" content="Comment monter une blockchain d'Ethereum avec le consensus Proof Of Authority (POA) en utilisant Geth">
    <meta itemprop="image" content="https://chiheb-nexus.github.io/assets/img/blog-image.png"/>

    <!-- Favicon -->
    <link rel="shortcut icon" href="/assets/img/icons/favicon.ico" type="image/x-icon" />

    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="~/λ/ Blog">
    <meta name="msapplication-TileColor" content="#5d4d7a">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />

    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#5d4d7a">

    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://chiheb-nexus.github.io/ethereumpoa/">
    <link rel="alternate" type="application/rss+xml" title="Nexus Coding | Pour un monde meilleur !" href="https://chiheb-nexus.github.io/feed.xml" />
    <!-- add main.js -->
    <script src="https://raw.githubusercontent.com/Chiheb-Nexus/chiheb-nexus.github.io/master/assets/js/main.js" type="application/javascript"></script>
</head>

    <body>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-email" viewBox="0 0 1024 1024"><path class="path1" d="M950.857 859.429v-438.857q-18.286 20.571-39.429 37.714-153.143 117.714-243.429 193.143-29.143 24.571-47.429 38.286t-49.429 27.714-58.571 14h-1.143q-27.429 0-58.571-14t-49.429-27.714-47.429-38.286q-90.286-75.429-243.429-193.143-21.143-17.143-39.429-37.714v438.857q0 7.429 5.429 12.857t12.857 5.429h841.143q7.429 0 12.857-5.429t5.429-12.857zM950.857 258.857v-14t-0.286-7.429-1.714-7.143-3.143-5.143-5.143-4.286-8-1.429h-841.143q-7.429 0-12.857 5.429t-5.429 12.857q0 96 84 162.286 110.286 86.857 229.143 181.143 3.429 2.857 20 16.857t26.286 21.429 25.429 18 28.857 15.714 24.571 5.143h1.143q11.429 0 24.571-5.143t28.857-15.714 25.429-18 26.286-21.429 20-16.857q118.857-94.286 229.143-181.143 30.857-24.571 57.429-66t26.571-75.143zM1024 237.714v621.714q0 37.714-26.857 64.571t-64.571 26.857h-841.143q-37.714 0-64.571-26.857t-26.857-64.571v-621.714q0-37.714 26.857-64.571t64.571-26.857h841.143q37.714 0 64.571 26.857t26.857 64.571z"/></symbol><symbol id="icon-close" viewBox="0 0 805 1024"><path class="path1" d="M741.714 755.429q0 22.857-16 38.857l-77.714 77.714q-16 16-38.857 16t-38.857-16l-168-168-168 168q-16 16-38.857 16t-38.857-16l-77.714-77.714q-16-16-16-38.857t16-38.857l168-168-168-168q-16-16-16-38.857t16-38.857l77.714-77.714q16-16 38.857-16t38.857 16l168 168 168-168q16-16 38.857-16t38.857 16l77.714 77.714q16 16 16 38.857t-16 38.857l-168 168 168 168q16 16 16 38.857z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-rss" viewBox="0 0 805 1024"><path class="path1" d="M219.429 768q0 45.714-32 77.714t-77.714 32-77.714-32-32-77.714 32-77.714 77.714-32 77.714 32 32 77.714zM512 838.286q1.143 16-9.714 27.429-10.286 12-26.857 12h-77.143q-14.286 0-24.571-9.429t-11.429-23.714q-12.571-130.857-105.429-223.714t-223.714-105.429q-14.286-1.143-23.714-11.429t-9.429-24.571v-77.143q0-16.571 12-26.857 9.714-9.714 24.571-9.714h2.857q91.429 7.429 174.857 46t148 103.714q65.143 64.571 103.714 148t46 174.857zM804.571 839.429q1.143 15.429-10.286 26.857-10.286 11.429-26.286 11.429h-81.714q-14.857 0-25.429-10t-11.143-24.286q-6.857-122.857-57.714-233.429t-132.286-192-192-132.286-233.429-58.286q-14.286-0.571-24.286-11.143t-10-24.857v-81.714q0-16 11.429-26.286 10.286-10.286 25.143-10.286h1.714q149.714 7.429 286.571 68.571t243.143 168q106.857 106.286 168 243.143t68.571 286.571z"/></symbol><symbol id="icon-google-plus" viewBox="0 0 951 1024"><path class="path1" d="M420 454.857q0 20.571 18.286 40.286t44.286 38.857 51.714 42 44 59.429 18.286 81.143q0 51.429-27.429 98.857-41.143 69.714-120.571 102.571t-170.286 32.857q-75.429 0-140.857-23.714t-98-78.571q-21.143-34.286-21.143-74.857 0-46.286 25.429-85.714t67.714-65.714q74.857-46.857 230.857-57.143-18.286-24-27.143-42.286t-8.857-41.714q0-20.571 12-48.571-26.286 2.286-38.857 2.286-84.571 0-142.571-55.143t-58-139.714q0-46.857 20.571-90.857t56.571-74.857q44-37.714 104.286-56t124.286-18.286h238.857l-78.857 50.286h-74.857q42.286 36 64 76t21.714 91.429q0 41.143-14 74t-33.714 53.143-39.714 37.143-34 35.143-14 37.714zM336.571 400q21.714 0 44.571-9.429t37.714-24.857q30.286-32.571 30.286-90.857 0-33.143-9.714-71.429t-27.714-74-48.286-59.143-66.857-23.429q-24 0-47.143 11.143t-37.429 30q-26.857 33.714-26.857 91.429 0 26.286 5.714 55.714t18 58.857 29.714 52.857 42.857 38.286 55.143 14.857zM337.714 898.857q33.143 0 63.714-7.429t56.571-22.286 41.714-41.714 15.714-62.286q0-14.286-4-28t-8.286-24-15.429-23.714-16.857-20-22-19.714-20.857-16.571-23.714-17.143-20.857-14.857q-9.143-1.143-27.429-1.143-30.286 0-60 4t-61.429 14.286-55.429 26.286-39.143 42.571-15.429 60.286q0 40 20 70.571t52.286 47.429 68 25.143 72.857 8.286zM800.571 398.286h121.714v61.714h-121.714v125.143h-60v-125.143h-121.143v-61.714h121.143v-124h60v124z"/></symbol><symbol id="icon-github-alt" viewBox="0 0 951 1024"><path class="path1" d="M365.714 694.857q0 22.857-7.143 46.857t-24.571 43.429-41.429 19.429-41.429-19.429-24.571-43.429-7.143-46.857 7.143-46.857 24.571-43.429 41.429-19.429 41.429 19.429 24.571 43.429 7.143 46.857zM731.429 694.857q0 22.857-7.143 46.857t-24.571 43.429-41.429 19.429-41.429-19.429-24.571-43.429-7.143-46.857 7.143-46.857 24.571-43.429 41.429-19.429 41.429 19.429 24.571 43.429 7.143 46.857zM822.857 694.857q0-68.571-39.429-116.571t-106.857-48q-23.429 0-111.429 12-40.571 6.286-89.714 6.286t-89.714-6.286q-86.857-12-111.429-12-67.429 0-106.857 48t-39.429 116.571q0 50.286 18.286 87.714t46.286 58.857 69.714 34.286 80 16.857 85.143 4h96q46.857 0 85.143-4t80-16.857 69.714-34.286 46.286-58.857 18.286-87.714zM950.857 594.286q0 118.286-34.857 189.143-21.714 44-60.286 76t-80.571 49.143-97.143 27.143-98 12.571-95.429 2.571q-44.571 0-81.143-1.714t-84.286-7.143-87.143-17.143-78.286-29.429-69.143-46.286-49.143-65.714q-35.429-70.286-35.429-189.143 0-135.429 77.714-226.286-15.429-46.857-15.429-97.143 0-66.286 29.143-124.571 61.714 0 108.571 22.571t108 70.571q84-20 176.571-20 84.571 0 160 18.286 60-46.857 106.857-69.143t108-22.286q29.143 58.286 29.143 124.571 0 49.714-15.429 96 77.714 91.429 77.714 227.429z"/></symbol><symbol id="icon-right-arrow"><path d="M21.205,5.007c-0.429-0.444-1.143-0.444-1.587,0c-0.429,0.429-0.429,1.143,0,1.571l8.047,8.047H1.111  C0.492,14.626,0,15.118,0,15.737c0,0.619,0.492,1.127,1.111,1.127h26.554l-8.047,8.032c-0.429,0.444-0.429,1.159,0,1.587  c0.444,0.444,1.159,0.444,1.587,0l9.952-9.952c0.444-0.429,0.444-1.143,0-1.571L21.205,5.007z" fill="#489472"/></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path class="path1" d="M1.852 11.047h1.805v-5.422h-1.805v5.422zM3.773 3.953q-0.008-0.406-0.281-0.672t-0.727-0.266-0.738 0.266-0.285 0.672q0 0.398 0.277 0.668t0.723 0.27h0.008q0.461 0 0.742-0.27t0.281-0.668zM8.344 11.047h1.805v-3.109q0-1.203-0.57-1.82t-1.508-0.617q-1.062 0-1.633 0.914h0.016v-0.789h-1.805q0.023 0.516 0 5.422h1.805v-3.031q0-0.297 0.055-0.438 0.117-0.273 0.352-0.465t0.578-0.191q0.906 0 0.906 1.227v2.898zM12 3.25v7.5q0 0.93-0.66 1.59t-1.59 0.66h-7.5q-0.93 0-1.59-0.66t-0.66-1.59v-7.5q0-0.93 0.66-1.59t1.59-0.66h7.5q0.93 0 1.59 0.66t0.66 1.59z"></path></symbol></defs></svg>

        <header class="header-post">
   	<p>λ</p>
    <div class="search-wrapper">

    <div class="search-form">
        <input arial-label="Search for a post" type="text" class="search-field" placeholder="Search...">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>

        <ul class="search-results search-list"></ul>
    </div>

</div>

<!-- Menu Open -> Fade effect -->
<div id="fade" class="overlay"></div>
<a id="slide" class="slideButton fade">
    <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    <svg id="close" class="icon-menu"><use xlink:href="#icon-close"></use></svg>
</a>

<aside id="sidebar">
  <div id="topmenu">
    
    <ul>
      <li><span>1</span></li>
      <li><span> /ethereumpoa/</span></li>
      <li><span>⌘ blogspace λ </span></li>
      <li><span>* Menu</span></li>
    </ul>

    <ul>
      <li><span>utf-8</span></li>
      <li><span>web</span></li>
      <li><span>.html</span></li>
    </ul>
  </div>

  <nav id="navigation" role="navigation">
    
      <ul>
      
        
            <li>
                <span class="counter-menu">1</span>
                <svg viewBox="0 0 50 50" class="icon-arrow-menu">
                    <use xlink:href="#icon-right-arrow"></use>
                </svg>
                <a key-trigger=1
                    href="https://chiheb-nexus.github.io/"> Acceuil</a>
            </li>
        
      
        
            <li>
                <span class="counter-menu">2</span>
                <svg viewBox="0 0 50 50" class="icon-arrow-menu">
                    <use xlink:href="#icon-right-arrow"></use>
                </svg>
                <a key-trigger=2
                    href="https://chiheb-nexus.github.io/posts"> Articles</a>
            </li>
        
      
        
            <li>
                <span class="counter-menu">3</span>
                <svg viewBox="0 0 50 50" class="icon-arrow-menu">
                    <use xlink:href="#icon-right-arrow"></use>
                </svg>
                <a key-trigger=3
                    href="https://chiheb-nexus.github.io/tags"> tags</a>
            </li>
        
      
        
            <li>
                <span class="counter-menu">4</span>
                <svg viewBox="0 0 50 50" class="icon-arrow-menu">
                    <use xlink:href="#icon-right-arrow"></use>
                </svg>
                <a key-trigger=4
                    href="https://chiheb-nexus.github.io/about"> À propos</a>
            </li>
        
      
        <li>
        <span class="counter-menu">5</span>
                <svg viewBox="0 0 50 50" class="icon-arrow-menu">
                    <use xlink:href="#icon-right-arrow"></use>
                </svg>
                <a href="https://chiheb-nexus.github.io/project-euler/"> Project Euler solutions</a>
        </li>
      </ul>
    
  </nav>
</aside>

<a id="search" class="dosearch">
    <svg class="icon-menu icon-search"><use xlink:href="#icon-search"></use></svg>
</a>

</header>

        <div class="tree-posts">

    <h3>Articles</h3>

    

    <article role="article" class="post-item" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
        <div class="content">
            <a title="Open the post" href="/ethereumpoa/">
                <h2 class="post-title" itemprop="name">Ethereum-POA-en-utilisant-Geth.md</h2>
            </a>
        </div>
    </article>

    

    <article role="article" class="post-item" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
        <div class="content">
            <a title="Open the post" href="/ethereumrlp/">
                <h2 class="post-title" itemprop="name">Ethereum-RLP:-Explication.md</h2>
            </a>
        </div>
    </article>

    

    <article role="article" class="post-item" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
        <div class="content">
            <a title="Open the post" href="/smartcontract/">
                <h2 class="post-title" itemprop="name">Ethereum-Smart-Contract.md</h2>
            </a>
        </div>
    </article>

    

    <article role="article" class="post-item" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
        <div class="content">
            <a title="Open the post" href="/btcaddress/">
                <h2 class="post-title" itemprop="name">Génération-des-adresses-Bitcoin.md</h2>
            </a>
        </div>
    </article>

    

    <article role="article" class="post-item" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
        <div class="content">
            <a title="Open the post" href="/initiez-vous-avec-les-dapps/">
                <h2 class="post-title" itemprop="name">Initiez-vous-avec-les-Dapps-d'Ethereum.md</h2>
            </a>
        </div>
    </article>

    

</div>

        <section class="post" itemscope itemtype="http://schema.org/BlogPosting">
            
                <div class="time">
                    <time itemprop="datePublished" datetime="2018-05-28 16:21:31 +0100">28 May 2018</time>
                </div>
            
            <h1 class="post-title" itemprop="name">Ethereum POA en utilisant Geth</h1>

            <article role="article" id="scroll" class="post-content" itemprop="articleBody">
                <p><img src="http://www.newsonjapan.com/images/article/oracles6.png" /></p>

<h2 id="définition-du-consensus-proof-of-authority-poa-preuve-dautorité">Définition du consensus Proof Of Authority (POA, Preuve d’autorité):</h2>

<p>Proof-of-authority (PoA) est un algorithme utilisé avec la technologie de blockchain qui fournit des transactions relativement rapides grâce à un mécanisme de consensus basé sur l’identité en tant que pieu (l’identité étant une preuve suffisante pour la validation des transactions).</p>

<p>Dans les réseaux basés sur le POA, les transactions et les blocs sont validés par des comptes approuvés, appelés validateurs. Les validateurs exécutent un logiciel leur permettant de mettre des transactions dans des blocs. Le processus est automatisé et n’exige pas que les validateurs surveillent constamment leurs ordinateurs. Cependant, il est nécessaire de maintenir l’ordinateur (le nœud d’autorité, ou l’ensemble des noeuds d’autorité) pour qu’ils ne soient pas compromis.</p>

<p>Avec les POA, les individus gagnent le droit de devenir des validateurs, donc il y a une incitation à conserver la position qu’ils ont acquis. En attachant une réputation à l’identité, les validateurs sont encouragés à maintenir le processus de transaction, car ils ne souhaitent pas que leur identité soit liée à une réputation négative. [Source: <a href="https://en.wikipedia.org/wiki/Proof-of-authority">Wikipedia</a>]</p>

<h2 id="comment-monter-notre-propre-chaîne-avec-le-consensus-poa-">Comment monter notre propre chaîne avec le consensus POA ?</h2>

<p><strong>Buts de ce tutoriel:</strong> Créer deux noeuds, en utilsant Geth, qui vont servire de <code class="highlighter-rouge">validateurs</code> de notre blockchain privée d’Ethereum. Et on va monter un bootnode qui va servir de service de découverte (discovery service). Et le tout formera un réseau d’Ethereum privé en P2P (Peer to Peer).</p>

<p>Avant de continuer la lecture, je tiens à vous inviter à lire la proposition <a href="https://github.com/ethereum/EIPs/issues/225">EIP255</a> qui a fait naître la possibilité d’intégrer la POA avec la blockchain d’Ethereum déjà existante.</p>

<p><img src="https://mightynotes.files.wordpress.com/2017/03/challenge-accepted-meme.jpg?w=437&amp;h=273" /></p>

<p>Dans ce tutoriel, je vais utiliser <code class="highlighter-rouge">Geth v1.7.3</code>, vous pouvez l’installer en visitant ce <a href="https://github.com/ethereum/go-ethereum/releases">lien</a>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> geth version
Geth
Version: 1.7.3-stable
Git Commit: 4bb3c89d44e372e6a9ab85a8be0c9345265c763a
Architecture: amd64
Protocol Versions: <span class="o">[</span>63 62]
Network Id: 1
Go Version: go1.9.2
Operating System: linux
<span class="nv">GOPATH</span><span class="o">=</span>/home/user/go
<span class="nv">GOROOT</span><span class="o">=</span>/usr/user/go
</code></pre></div></div>

<p><strong>PS</strong>: Si vous utilisez Ubuntu 16.04+ ou une distribution dérivée d’Ubuntu, vous pouvez télécharger <code class="highlighter-rouge">Geth</code> en ajoutant le PPA d’Ethereum [Pour plus d’informations, veuillez visiter ce <a href="https://geth.ethereum.org/install/">lien</a>]:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> <span class="nb">sudo </span>apt update
<span class="nv">$&gt;</span> <span class="nb">sudo </span>add-apt-repository <span class="nt">-y</span> ppa:ethereum/ethereum
<span class="nv">$&gt;</span> <span class="nb">sudo </span>apt update
<span class="nv">$&gt;</span> <span class="nb">sudo </span>apt-get <span class="nb">install </span>ethereum
</code></pre></div></div>

<p>Maintenant, créons un nouveau espace de travail:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> <span class="nb">cd</span>  <span class="c"># Aller au dossier de l'utilisateur</span>
<span class="nv">$&gt;</span> <span class="nb">mkdir </span>test_poa <span class="c"># Créer un nouveau dossier</span>
<span class="nv">$&gt;</span> <span class="nb">cd </span>test_poa
<span class="nv">$&gt;</span> <span class="nb">mkdir </span>node1 node2
</code></pre></div></div>

<p>Ensuite, on va créer des comptes Ethereum avec <code class="highlighter-rouge">Geth</code> pour les noeuds 1 et 2:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> geth <span class="nt">--datadir</span> node1/ account new
Your new account is locked with a password. Please give a password. Do not forget this password.
Passphrase: 
Repeat passphrase: <span class="c"># ici on écrit le mot de passe pour le compte n°1 du noeud 1</span>
Address: <span class="o">{</span>2d299ed001270f8c2f02abdda2bda4e5b4cca348<span class="o">}</span> <span class="c"># adresse publique du compte n°1</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> geth <span class="nt">--datadir</span> node2/ account new
Your new account is locked with a password. Please give a password. Do not forget this password.
Passphrase: 
Repeat passphrase: <span class="c"># ici on écrit le mot de passe pour le compte n°2 du noeud 2</span>
Address: <span class="o">{</span>bbb6abec9f9b6d0e7d3ff18bcb68ce6ac931478f<span class="o">}</span> <span class="c"># adresse publique du compte n°2</span>
</code></pre></div></div>

<p>Ces commandes vont créer un nouveau dossier sous chacun des dossiers <code class="highlighter-rouge">node1</code> et <code class="highlighter-rouge">node2</code> nommé <code class="highlighter-rouge">keystore</code> qui va contenir un fichier qui va servir du compte ethereum pour le noeud n°1 et le noeud n°2.</p>

<p>À ce niveau, copions les deux adresses publiques, générées par <code class="highlighter-rouge">Geth</code>, dans un nouveau fichier nommé <code class="highlighter-rouge">accounts </code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"2d299ed001270f8c2f02abdda2bda4e5b4cca348"</span> <span class="o">&gt;&gt;</span> accounts
<span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"bbb6abec9f9b6d0e7d3ff18bcb68ce6ac931478f"</span> <span class="o">&gt;&gt;</span> accounts
</code></pre></div></div>

<p>Et écrivons les mots de passes de chaque compte de chaque noeud dans un fichier nommé <code class="highlighter-rouge">password</code> sous chaque dossier de chaque noeud:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"node1 password"</span> <span class="o">&gt;</span> node1/password
<span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"node2 password"</span> <span class="o">&gt;</span> node2/password
</code></pre></div></div>

<p>Miantenant, créons le fichier <code class="highlighter-rouge">Genesis</code> qui va servir à initier notre nouvelle blockchain privée (pour plus d’informations sur le <code class="highlighter-rouge">Genesis block</code> veuillez visiter ce <a href="https://en.bitcoin.it/wiki/Genesis_block">lien</a>)</p>

<p>Pour ne pas compliquer les choses, <code class="highlighter-rouge">Geth</code> vient avec un exécutable nommé <code class="highlighter-rouge">puppeth</code> qui facilite la création des fichier <code class="highlighter-rouge">Genesis</code> qui vont initier les nouvelles blockchain privées.</p>

<p><strong>PS:</strong> Si vous ne trouvez pas l’exécutable <code class="highlighter-rouge">puppeth</code>, vous pouvez l’installer via le PPA d’ethereum qu’on a vu au début de ce tutoriel:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> <span class="nb">sudo </span>apt update
<span class="nv">$&gt;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>puppeth
</code></pre></div></div>

<p>À ce niveau, créons le fichier <code class="highlighter-rouge">Genesis</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> puppeth
+-----------------------------------------------------------+
| Welcome to puppeth, your Ethereum private network manager |
|                                                           |
| This tool lets you create a new Ethereum network down to  |
| the genesis block, bootnodes, miners and ethstats servers |
| without the hassle that it would normally entail.         |
|                                                           |
| Puppeth uses SSH to dial <span class="k">in </span>to remote servers, and builds |
| its network components out of Docker containers using the |
| docker-compose toolset.                                   |
+-----------------------------------------------------------+

Please specify a network name to administer <span class="o">(</span>no spaces or hyphens, please<span class="o">)</span>
<span class="o">&gt;</span> NexusNetwork <span class="c"># Nom de notre nouveau Network (nouvelle blockchain) (PS: Pas d'espaces !)</span>

Sweet, you can <span class="nb">set </span>this via <span class="nt">--network</span><span class="o">=</span>NexusNetwork next <span class="nb">time</span><span class="o">!</span>

INFO <span class="o">[</span>05-29|14:06:10] Administering Ethereum network           <span class="nv">name</span><span class="o">=</span>NexusNetwork
WARN <span class="o">[</span>05-29|14:06:10] No previous configurations found         <span class="nv">path</span><span class="o">=</span>/home/user/.puppeth/NexusNetwork

What would you like to <span class="k">do</span>? <span class="o">(</span>default <span class="o">=</span> stats<span class="o">)</span>
 1. Show network stats
 2. Configure new genesis
 3. Track new remote server
 4. Deploy network components
<span class="o">&gt;</span> 2 <span class="c"># choisir n° 2</span>

Which consensus engine to use? <span class="o">(</span>default <span class="o">=</span> clique<span class="o">)</span>
 1. Ethash - proof-of-work
 2. Clique - proof-of-authority
<span class="o">&gt;</span> 2 <span class="c"># choisir le consensus POA qui est le n°2</span>

How many seconds should blocks take? <span class="o">(</span>default <span class="o">=</span> 15<span class="o">)</span>
<span class="o">&gt;</span> 3 <span class="c"># le temps entre chaque bloc</span>

Which accounts are allowed to seal? <span class="o">(</span>mandatory at least one<span class="o">)</span> <span class="c"># seal = validateur</span>
<span class="o">&gt;</span> 0x2d299ed001270f8c2f02abdda2bda4e5b4cca348 <span class="c"># adresse publique du compte du noeud n°1</span>
<span class="o">&gt;</span> 0xbbb6abec9f9b6d0e7d3ff18bcb68ce6ac931478f <span class="c"># adresse publique du compte du noeud n°2</span>
<span class="o">&gt;</span> 0x

Which accounts should be pre-funded? <span class="o">(</span>advisable at least one<span class="o">)</span> <span class="c"># Ajouter des fonds aux adresses</span>
<span class="o">&gt;</span> 0x2d299ed001270f8c2f02abdda2bda4e5b4cca348 <span class="c"># adresse publique du compte du noeud n°1</span>
<span class="o">&gt;</span> 0xbbb6abec9f9b6d0e7d3ff18bcb68ce6ac931478f <span class="c"># adresse publique du compte du noeud n°2</span>
<span class="o">&gt;</span> 0x

Specify your chain/network ID <span class="k">if </span>you want an explicit one <span class="o">(</span>default <span class="o">=</span> random<span class="o">)</span>
<span class="o">&gt;</span> 9999 <span class="c"># ID de notre réseau</span>
INFO <span class="o">[</span>05-29|14:07:30] Configured new genesis block 

What would you like to <span class="k">do</span>? <span class="o">(</span>default <span class="o">=</span> stats<span class="o">)</span>
 1. Show network stats
 2. Manage existing genesis
 3. Track new remote server
 4. Deploy network components
<span class="o">&gt;</span> 2 <span class="c"># choisir 2</span>

 1. Modify existing fork rules
 2. Export genesis configuration
 3. Remove genesis configuration
<span class="o">&gt;</span> 2 <span class="c"># choisir 2 pour exporter le fichier Genesis nommé NexusNetwork.json</span>

Which file to save the genesis into? <span class="o">(</span>default <span class="o">=</span> NexusNetwork.json<span class="o">)</span>
<span class="o">&gt;</span> 
INFO <span class="o">[</span>05-29|14:08:09] Exported existing genesis block 

What would you like to <span class="k">do</span>? <span class="o">(</span>default <span class="o">=</span> stats<span class="o">)</span>
 1. Show network stats
 2. Manage existing genesis
 3. Track new remote server
 4. Deploy network components
<span class="o">&gt;</span> ^C
</code></pre></div></div>

<p>L’arboraissance de notre projet sera comme suit:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tree <span class="nt">-L</span> 2
<span class="nb">.</span>
├── accounts
├── NexusNetwork.json
├── node1
│   ├── keystore
│   └── password
└── node2
    ├── keystore
    └── password

4 directories, 4 files
</code></pre></div></div>

<p>Et le contenu du fichier <code class="highlighter-rouge">NexusNetwork.json</code> est:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> <span class="nb">cat </span>NexusNetwork.json 
<span class="o">{</span>
  <span class="s2">"config"</span>: <span class="o">{</span>
    <span class="s2">"chainId"</span>: 9999,
    <span class="s2">"homesteadBlock"</span>: 1,
    <span class="s2">"eip150Block"</span>: 2,
    <span class="s2">"eip150Hash"</span>: <span class="s2">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,
    <span class="s2">"eip155Block"</span>: 3,
    <span class="s2">"eip158Block"</span>: 3,
    <span class="s2">"byzantiumBlock"</span>: 4,
    <span class="s2">"clique"</span>: <span class="o">{</span>
      <span class="s2">"period"</span>: 3,
      <span class="s2">"epoch"</span>: 30000
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="s2">"nonce"</span>: <span class="s2">"0x0"</span>,
  <span class="s2">"timestamp"</span>: <span class="s2">"0x5b0d504f"</span>,
  <span class="s2">"extraData"</span>: <span class="s2">"0x00000000000000000000000000000000000000000000000000000000000000002d299ed001270f8c2f02abdda2bda4e5b4cca348bbb6abec9f9b6d0e7d3ff18bcb68ce6ac931478f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"</span>,
  <span class="s2">"gasLimit"</span>: <span class="s2">"0x47b760"</span>,
  <span class="s2">"difficulty"</span>: <span class="s2">"0x1"</span>,
  <span class="s2">"mixHash"</span>: <span class="s2">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,
  <span class="s2">"coinbase"</span>: <span class="s2">"0x0000000000000000000000000000000000000000"</span>,
  <span class="s2">"alloc"</span>: <span class="o">{</span>
    <span class="s2">"0000000000000000000000000000000000000000"</span>: <span class="o">{</span>
      <span class="s2">"balance"</span>: <span class="s2">"0x1"</span>
    <span class="o">}</span>,
    <span class="s2">"0000000000000000000000000000000000000001"</span>: <span class="o">{</span>
      <span class="s2">"balance"</span>: <span class="s2">"0x1"</span>
    ...
    <span class="s2">"bbb6abec9f9b6d0e7d3ff18bcb68ce6ac931478f"</span>: <span class="o">{</span>
      <span class="s2">"balance"</span>: <span class="s2">"0x200000000000000000000000000000000000000000000000000000000000000"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="s2">"number"</span>: <span class="s2">"0x0"</span>,
  <span class="s2">"gasUsed"</span>: <span class="s2">"0x0"</span>,
  <span class="s2">"parentHash"</span>: <span class="s2">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Ceci dit, initions nos noeuds avec le nouveau fichier <code class="highlighter-rouge">Genesis</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> geth <span class="nt">--datadir</span> node1/ init NexusNetwork.json 
INFO <span class="o">[</span>05-29|14:10:14] Allocated cache and file handles         <span class="nv">database</span><span class="o">=</span>/home/user/test_poa/node1/geth/chaindata <span class="nv">cache</span><span class="o">=</span>16 <span class="nv">handles</span><span class="o">=</span>16
INFO <span class="o">[</span>05-29|14:10:14] Writing custom genesis block 
INFO <span class="o">[</span>05-29|14:10:14] Successfully wrote genesis state         <span class="nv">database</span><span class="o">=</span>chaindata                                  <span class="nb">hash</span><span class="o">=</span>78e1c1…31bcdd
INFO <span class="o">[</span>05-29|14:10:14] Allocated cache and file handles         <span class="nv">database</span><span class="o">=</span>/home/user/test_poa/node1/geth/lightchaindata <span class="nv">cache</span><span class="o">=</span>16 <span class="nv">handles</span><span class="o">=</span>16
INFO <span class="o">[</span>05-29|14:10:14] Writing custom genesis block 
INFO <span class="o">[</span>05-29|14:10:14] Successfully wrote genesis state         <span class="nv">database</span><span class="o">=</span>lightchaindata                                  <span class="nb">hash</span><span class="o">=</span>78e1c1…31bcdd

<span class="nv">$&gt;</span>geth <span class="nt">--datadir</span> node2/ init NexusNetwork.json 
INFO <span class="o">[</span>05-29|14:10:20] Allocated cache and file handles         <span class="nv">database</span><span class="o">=</span>/home/user/test_poa/node2/geth/chaindata <span class="nv">cache</span><span class="o">=</span>16 <span class="nv">handles</span><span class="o">=</span>16
INFO <span class="o">[</span>05-29|14:10:20] Writing custom genesis block 
INFO <span class="o">[</span>05-29|14:10:20] Successfully wrote genesis state         <span class="nv">database</span><span class="o">=</span>chaindata                                  <span class="nb">hash</span><span class="o">=</span>78e1c1…31bcdd
INFO <span class="o">[</span>05-29|14:10:20] Allocated cache and file handles         <span class="nv">database</span><span class="o">=</span>/home/user/test_poa/node2/geth/lightchaindata <span class="nv">cache</span><span class="o">=</span>16 <span class="nv">handles</span><span class="o">=</span>16
INFO <span class="o">[</span>05-29|14:10:20] Writing custom genesis block 
INFO <span class="o">[</span>05-29|14:10:20] Successfully wrote genesis state         <span class="nv">database</span><span class="o">=</span>lightchaindata 
</code></pre></div></div>

<p>Puis, créons un <code class="highlighter-rouge">boot.key</code> en utilisant <code class="highlighter-rouge">bootnode</code> un exécutable trouvé dans le projet <code class="highlighter-rouge">Geth</code> et si cet exécutable est manquant, vous pouvez le télécharger via les dépôts du PPA d’Ethereum ajouté au début de l’article:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> <span class="nb">sudo </span>apt update
<span class="nv">$&gt;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>bootnode
</code></pre></div></div>

<p>Et la génération du <code class="highlighter-rouge">boot.key</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> bootnode <span class="nt">-genkey</span> boot.key
<span class="nv">$&gt;</span> <span class="nb">cat </span>boot.key 
7dd0375ae3f0e92cc151829e98289ccde4b9c2cb2317bd15283d6b930f47bfc4
</code></pre></div></div>

<p>Et la nouvelle arboraissance du projet sera:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tree <span class="nt">-L</span> 2
<span class="nb">.</span>
├── accounts
├── boot.key
├── NexusNetwork.json
├── node1
│   ├── geth
│   ├── keystore
│   └── password
└── node2
    ├── geth
    ├── keystore
    └── password

6 directories, 5 files
</code></pre></div></div>

<p>Maintenant, dans une terminale, exécutons notre bootnode:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bootnode <span class="nt">-nodekey</span> boot.key <span class="nt">-verbosity</span> 9 <span class="nt">-addr</span> :30310
INFO <span class="o">[</span>05-29|14:16:50] UDP listener up                          <span class="nv">self</span><span class="o">=</span>enode://393fafe1972bb56d3743a7d0d5590c113c357348815f10b8d970ffa3919b71be734abf8ebeff2eb2921eee305ba4c2fefbbd79ef3a69e4a78750491da3824d78@[::]:30310
</code></pre></div></div>

<p>Et dans une autre terminale, exécutons le noeud n°1:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> geth <span class="nt">--datadir</span> node1/ <span class="nt">--syncmode</span> <span class="s1">'full'</span> <span class="nt">--port</span> 30311 <span class="nt">--rpc</span> <span class="nt">--rpcaddr</span> <span class="s1">'localhost'</span> <span class="nt">--rpcport</span> 8501 <span class="nt">--rpcapi</span> <span class="s1">'personal,net,db,eth,web3,txpool,miner'</span> <span class="nt">--bootnodes</span> <span class="s1">'enode://393fafe1972bb56d3743a7d0d5590c113c357348815f10b8d970ffa3919b71be734abf8ebeff2eb2921eee305ba4c2fefbbd79ef3a69e4a78750491da3824d78@127.0.0.1:30310'</span> <span class="nt">-networkid</span> 9999 <span class="nt">--gasprice</span> <span class="s1">'1'</span> <span class="nt">--unlock</span> <span class="s1">'2d299ed001270f8c2f02abdda2bda4e5b4cca348'</span> <span class="nt">--password</span> node1/password <span class="nt">--mine</span>
</code></pre></div></div>

<p>Et dans une autre terminale exécutons le noeud n°2:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> geth <span class="nt">--datadir</span> node1/ <span class="nt">--syncmode</span> <span class="s1">'full'</span> <span class="nt">--port</span> 30311 <span class="nt">--rpc</span> <span class="nt">--rpcaddr</span> <span class="s1">'localhost'</span> <span class="nt">--rpcport</span> 8501 <span class="nt">--rpcapi</span> <span class="s1">'personal,db,eth,web3,txpool,miner'</span> <span class="nt">--bootnodes</span> <span class="s1">'enode://393fafe1972bb56d3743a7d0d5590c113c357348815f10b8d970ffa3919b71be734abf8ebeff2eb2921eee305ba4c2fefbbd79ef3a69e4a78750491da3824d78@127.0.0.1:30310'</span> <span class="nt">-networkid</span> 9999 <span class="nt">--gasprice</span> <span class="s1">'1'</span> <span class="nt">--unlock</span> <span class="s1">'2d299ed001270f8c2f02abdda2bda4e5b4cca348'</span> <span class="nt">--password</span> node1/password <span class="nt">--mine</span>
</code></pre></div></div>

<p>En ouvrant la terminale qu’on a utilisé pour exécuter notre bootnode, on va constater que le deux noeuds sont activées vu que les adresses <code class="highlighter-rouge">127.0.0.1:30311</code> et <code class="highlighter-rouge">127.0.0.1:30312</code> sont activées:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TRACE[05-29|14:28:25] <span class="o">&gt;&gt;</span> NEIGHBORS/v4                          <span class="nv">addr</span><span class="o">=</span>127.0.0.1:30311 <span class="nv">err</span><span class="o">=</span>nil
TRACE[05-29|14:28:25] <span class="o">&lt;&lt;</span> <span class="no">FINDNODE</span><span class="sh">/v4                           addr=127.0.0.1:30311 err=nil
TRACE[05-29|14:28:25] &gt;&gt; PING/v4                               addr=127.0.0.1:30312 err=nil
TRACE[05-29|14:28:25] &lt;&lt; PONG/v4                               addr=127.0.0.1:30312 err=nil
</span></code></pre></div></div>

<p>Et en ouvrant une autre terminale pour voir la nouvelle arboraissance du projet quand les noeuds et le bootnode sont activés, on va remarquer la génération de deux nouveaux fichiers <code class="highlighter-rouge">geth.ipc</code> qui vont servire à activer la communication <code class="highlighter-rouge">IPC</code> avec notre nouvelle blockchain:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tree <span class="nt">-L</span> 2
<span class="nb">.</span>
├── accounts
├── boot.key
├── NexusNetwork.json
├── node1
│   ├── geth
│   ├── geth.ipc
│   ├── keystore
│   └── password
└── node2
    ├── geth
    ├── geth.ipc
    ├── keystore
    └── password

6 directories, 7 files
</code></pre></div></div>

<p>Essayons d’activer la console JavaScript de Geth en utilisant <code class="highlighter-rouge">IPC</code> comme moyen de communication:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>geth attach node1/geth.ipc 
Welcome to the Geth JavaScript console!

instance: Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9.2
coinbase: 0x2d299ed001270f8c2f02abdda2bda4e5b4cca348
at block: 80 <span class="o">(</span>Tue, 29 May 2018 14:32:08 CET<span class="o">)</span>
 datadir: /home/user/test_poa/node1
 modules: admin:1.0 clique:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0

<span class="o">&gt;</span> <span class="c"># Console activée avec succès !</span>
</code></pre></div></div>

<p>De même essayons d’activer la console JavaScript de Geth en utilsant le protocole <code class="highlighter-rouge">RPC/HTTP</code> comme moyen de communication:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>geth attach <span class="s1">'http://localhost:8501'</span>
Welcome to the Geth JavaScript console!

instance: Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9.2
coinbase: 0x2d299ed001270f8c2f02abdda2bda4e5b4cca348
at block: 104 <span class="o">(</span>Tue, 29 May 2018 14:33:20 CET<span class="o">)</span>
 modules: eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0

<span class="o">&gt;</span> <span class="c"># Console activée avec succès !</span>
</code></pre></div></div>

<p><strong>PS:</strong> On peut noter que Geth nous dise qu’il a ouvert le port <code class="highlighter-rouge">8501 pour la communication RPC/HTTP</code> et le endpoint <code class="highlighter-rouge">IPC</code> pour une interaction avec ses fonctionnalités. Par exemple dans le noeud n°1 en lançant les commandes en dessus on peut constater ce message:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>INFO <span class="o">[</span>05-29|14:24:21] IPC endpoint opened: /home/user/test_poa/node1/geth.ipc 
INFO <span class="o">[</span>05-29|14:24:21] HTTP endpoint opened: http://localhost:8501 
</code></pre></div></div>

<p>Maintenant, essayons de communiquer avec notre nouvelle blockchain en utilisant la console JavaScript de Geth:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> geth attach <span class="s1">'http://localhost:8501'</span>
Welcome to the Geth JavaScript console!

instance: Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9.2
coinbase: 0x2d299ed001270f8c2f02abdda2bda4e5b4cca348
at block: 136 <span class="o">(</span>Tue, 29 May 2018 14:35:29 CET<span class="o">)</span>
 modules: eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0

<span class="o">&gt;</span> net.version
<span class="s2">"9999"</span> <span class="c"># version de notre réseau</span>
<span class="o">&gt;</span> eth.blockNumber
153 <span class="c"># le dernier block trouvé</span>
<span class="o">&gt;</span> eth.coinbase
<span class="s2">"0x2d299ed001270f8c2f02abdda2bda4e5b4cca348"</span> <span class="c"># adresse du compte par défaut</span>
<span class="o">&gt;</span> eth.sendTransaction<span class="o">({</span><span class="s1">'from'</span>: eth.coinbase, <span class="s1">'to'</span>: <span class="s1">'bbb6abec9f9b6d0e7d3ff18bcb68ce6ac931478f'</span>, <span class="s1">'value'</span>: web3.toWei<span class="o">(</span>1, <span class="s1">'ether'</span><span class="o">)})</span>
<span class="s2">"0x9c896d9e26d9671d4dfe56861e05b01b18380a48905de77234b5569e554fa349"</span> <span class="c"># tx hash</span>
<span class="o">&gt;</span> eth.getTransactionReceipt<span class="o">(</span><span class="s2">"0x9c896d9e26d9671d4dfe56861e05b01b18380a48905de77234b5569e554fa349"</span><span class="o">)</span>
<span class="o">{</span>
  blockHash: <span class="s2">"0x7de8cc81dc7d5a9839b63f5ce47b05c5fddc6347f8df30fd4f8357217a1b562b"</span>,
  blockNumber: 189,
  contractAddress: null,
  cumulativeGasUsed: 21000,
  from: <span class="s2">"0x2d299ed001270f8c2f02abdda2bda4e5b4cca348"</span>,
  gasUsed: 21000,
  logs: <span class="o">[]</span>,
  logsBloom: <span class="s2">"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"</span>,
  status: <span class="s2">"0x1"</span>,
  to: <span class="s2">"0xbbb6abec9f9b6d0e7d3ff18bcb68ce6ac931478f"</span>,
  transactionHash: <span class="s2">"0x9c896d9e26d9671d4dfe56861e05b01b18380a48905de77234b5569e554fa349"</span>,
  transactionIndex: 0
<span class="o">}</span>
<span class="o">&gt;</span> <span class="nb">exit</span>
</code></pre></div></div>

<p>De la même façon, essayons de comminiquer avec notre nouvelle blockchain en utilisant <code class="highlighter-rouge">Python et web3(v4.2.1)</code>:</p>

<p><strong>PS</strong>: Veuillez visiter ce <a href="http://web3py.readthedocs.io/en/stable/middleware.html#geth-style-proof-of-authority">lien</a> pour activer le middleware qui va faciliter la communication avec notre nouvelle blockchain avec le consensus POA.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">IPCProvider</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">IPCProvider</span><span class="p">(</span><span class="s">'/home/user/test_poa/node1/geth.ipc'</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">geth_poa_middleware</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">w3</span><span class="o">.</span><span class="n">middleware_stack</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">geth_poa_middleware</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">w3</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">node</span>
<span class="s">'Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9.2'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">coinbase</span>
<span class="s">'0x2d299ed001270F8C2f02abDDa2Bda4E5B4CCa348'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">gasPrice</span>
<span class="mi">1</span> <span class="c"># en wei</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">getBalance</span><span class="p">(</span><span class="s">"0x2d299ed001270F8C2f02abDDa2Bda4E5B4CCa348"</span><span class="p">)</span>
<span class="mi">904625697166532776746648320380374280103671755200316906557262375061821304312</span> <span class="c"># en wei</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">w3</span><span class="o">.</span><span class="n">fromWei</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">getBalance</span><span class="p">(</span><span class="s">"0x2d299ed001270F8C2f02abDDa2Bda4E5B4CCa348"</span><span class="p">),</span> <span class="s">'ether'</span><span class="p">)</span>
<span class="n">Decimal</span><span class="p">(</span><span class="s">'904625697166532776746648320380374280103671755200316906557.262375061821304312'</span><span class="p">)</span> <span class="c"># en ether</span>
</code></pre></div></div>

<p><strong>Au final:</strong> On a pu créer une blockchain privée d’ethereum avec le consensus POA qui peut nous être utile pour le cas où on cherche à créer un réseau blockchain <code class="highlighter-rouge">sans GAS/sans frais de transaction</code> ou avec des frais moins élevés ou bien en montant des noeuds spécifiques qui seront les seuls participants de confiance du réseau et bien sûr l’un des atouts du POA c’est qu’il n’utilise pas des réssources énormes pour la validation des blocs (à l’instar du consensus POW, Proof Of Work).</p>

<p>Ceci dit, ce type de réseau est utile pour les tests en local, comme pour des solutions pour des organismes privés qui cherchent à monter une solution blockchain en limitant l’accès à des membres bien définis.</p>

<p><img src="http://4.bp.blogspot.com/-zPPnwXn3GJI/Vj-en5uK5AI/AAAAAAAAPSE/RSKCq1QMY5k/s640/thats%2Bit%2Bthats%2Ball%2Bfolks.jpg" /></p>


            </article>

            <section class="share">

    <h3>Partager</h3>

    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;&quot;%20https://chiheb-nexus.github.io/ethereumpoa/%20via%20&#64;Chiheb_NeXus&hashtags=ethereum,web3,web3.py,geth,blockchain,POA,Proof Of Authority,consensus,"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>

    <a aria-label="Share on Facebook"href="https://www.facebook.com/sharer/sharer.php?u=https://chiheb-nexus.github.io/ethereumpoa/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>

    <a aria-label="Share on Google Plus" href="https://plus.google.com/share?url=https://chiheb-nexus.github.io/ethereumpoa/"
    onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google+">
        <svg class="icon icon-google-plus"><use xlink:href="#icon-google-plus"></use></svg>
    </a>

</section>

            <section class="comments">

    <h3>Commentaires</h3>
    <div id="disqus_thread"></div>

</section>

<script type="text/javascript">

    var disqus_loaded = false;

    function load_disqus(){
        disqus_loaded = true;
        var disqus_shortname = 'nexus-coding';
        var disqus_title = '';
        var disqus_url = '/ethereumpoa/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };

    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>

            <footer>

	<p>Chiheb Nexus - Copyleft  <span class="copyleft">&copy;</span> - 2018</p> 

</footer>

            <script src="/assets/js/main.js"></script>
        </section>
    </body>
</html>
